@if (cart().items.length < 1) {
<div class="flex justify-center items-center h-64">
  <h1 class="text-2xl font-semibold text-gray-500">ðŸ›’ Tu carrito estÃ¡ vacÃ­o</h1>
</div>
} @else {
<section class="flex flex-col md:flex-row gap-6 max-w-6xl mx-auto p-4">
  <aside class="w-full md:w-1/2 flex flex-col gap-4 max-h-[70vh] overflow-y-auto">
    @for (item of cart().items; track item.id) {
    <div class="flex gap-4 p-4 border rounded-lg shadow-sm bg-white">
      <img [src]="item.image" [alt]="item.name" class="w-20 h-20 object-cover rounded" />

      <div class="flex flex-col gap-1 flex-1">
        <h2 class="font-semibold text-lg">{{ item.name }}</h2>
        <p class="text-sm text-gray-600">Cantidad: {{ item.quantity }}</p>
        <p class="font-medium text-blue-600">Subtotal: ${{ item.subtotal }}</p>

        <div class="flex justify-center items-center gap-4 mt-2">
          <button
            class="bg-blue-600 text-white w-8 h-8 rounded-full hover:bg-blue-700 transition"
            (click)="updateCantidad(item.id, item.quantity - 1)"
          >
            âˆ’
          </button>

          <button
            class="bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700 transition text-sm font-semibold"
            (click)="deleteItem(item.id)"
          >
            Eliminar
          </button>

          <button
            class="bg-blue-600 text-white w-8 h-8 rounded-full hover:bg-blue-700 transition"
            (click)="updateCantidad(item.id, item.quantity + 1)"
          >
            +
          </button>
        </div>
      </div>
    </div>
    }
  </aside>

  <div class="w-full md:w-1/2">
    <div class="sticky top-4 p-6 border rounded-xl shadow-md bg-white flex flex-col gap-4">
      <h2 class="text-xl font-bold">Resumen del pedido</h2>

      <div class="flex justify-between text-gray-700">
        <span>Productos</span>
        <span>{{ cart().items.length }}</span>
      </div>

      <div class="flex justify-between text-lg font-semibold">
        <span>Total</span>
        <span>${{ cart().total }}</span>
      </div>

      <p class="text-sm text-gray-500">Impuestos y envÃ­o calculados en el checkout.</p>

      <button
        class="bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition"
        (click)="createOrder()"
        routerLink="/orders"
      >
        Comprar Carrito
      </button>

      <p class="text-xs text-center text-gray-400">ðŸ”’ Pago seguro y protegido</p>
    </div>
  </div>
</section>
}
